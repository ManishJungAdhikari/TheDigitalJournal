@page "/analytics"

<div class="analytics-container">
    <div class="analytics-header">
        <h1>üìä Analytics & Insights</h1>
        <div class="date-range-selector">
            <select class="range-select">
                <option>Last 7 Days</option>
                <option>Last 30 Days</option>
                <option selected>Last 3 Months</option>
                <option>Last 6 Months</option>
                <option>Last Year</option>
                <option>All Time</option>
                <option>Custom Range</option>
            </select>
        </div>
    </div>

    <div class="analytics-grid">
        <div class="analytics-card large">
            <h3>üìà Mood Distribution</h3>
            <div class="chart-container">
                <div class="pie-chart">
                    <div class="pie-slice positive" style="--percentage: 60"></div>
                    <div class="pie-slice neutral" style="--percentage: 25"></div>
                    <div class="pie-slice negative" style="--percentage: 15"></div>
                </div>
                <div class="chart-legend">
                    <div class="legend-item">
                        <span class="legend-color positive-bg"></span>
                        <span>Positive: 60% (87 entries)</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color neutral-bg"></span>
                        <span>Neutral: 25% (36 entries)</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color negative-bg"></span>
                        <span>Negative: 15% (22 entries)</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="analytics-card">
            <h3>üòä Most Frequent Mood</h3>
            <div class="mood-stats">
                <div class="mood-display">
                    <span class="big-emoji">üòä</span>
                    <div class="mood-name">Happy</div>
                    <div class="mood-count">42 entries</div>
                </div>
                <div class="top-moods">
                    <div class="mini-mood">üéâ Excited - 28</div>
                    <div class="mini-mood">üòå Relaxed - 24</div>
                    <div class="mini-mood">üôè Grateful - 19</div>
                </div>
            </div>
        </div>

        <div class="analytics-card">
            <h3>üî• Streak Information</h3>
            <div class="streak-stats">
                <div class="streak-item">
                    <div class="streak-label">Current Streak</div>
                    <div class="streak-value primary">12 days</div>
                </div>
                <div class="streak-item">
                    <div class="streak-label">Longest Streak</div>
                    <div class="streak-value">28 days</div>
                </div>
                <div class="streak-item">
                    <div class="streak-label">Missed Days</div>
                    <div class="streak-value missed">8 days</div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 85%"></div>
                </div>
                <div class="progress-label">85% completion rate</div>
            </div>
        </div>

        <div class="analytics-card large">
            <h3>üè∑Ô∏è Most Used Tags</h3>
            <div class="tag-chart">
                <div class="tag-bar-item">
                    <div class="tag-name">Work</div>
                    <div class="tag-bar">
                        <div class="bar-fill" style="width: 85%">45</div>
                    </div>
                </div>
                <div class="tag-bar-item">
                    <div class="tag-name">Health</div>
                    <div class="tag-bar">
                        <div class="bar-fill" style="width: 70%">38</div>
                    </div>
                </div>
                <div class="tag-bar-item">
                    <div class="tag-name">Studies</div>
                    <div class="tag-bar">
                        <div class="bar-fill" style="width: 65%">34</div>
                    </div>
                </div>
                <div class="tag-bar-item">
                    <div class="tag-name">Fitness</div>
                    <div class="tag-bar">
                        <div class="bar-fill" style="width: 55%">29</div>
                    </div>
                </div>
                <div class="tag-bar-item">
                    <div class="tag-name">Travel</div>
                    <div class="tag-bar">
                        <div class="bar-fill" style="width: 40%">21</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="analytics-card">
            <h3>üìë Tag Breakdown</h3>
            <div class="category-breakdown">
                <div class="category-item">
                    <div class="category-header">
                        <span>Work & Career</span>
                        <span class="percentage">35%</span>
                    </div>
                    <div class="category-bar">
                        <div class="category-fill" style="width: 35%"></div>
                    </div>
                </div>
                <div class="category-item">
                    <div class="category-header">
                        <span>Health & Fitness</span>
                        <span class="percentage">28%</span>
                    </div>
                    <div class="category-bar">
                        <div class="category-fill" style="width: 28%"></div>
                    </div>
                </div>
                <div class="category-item">
                    <div class="category-header">
                        <span>Personal Growth</span>
                        <span class="percentage">22%</span>
                    </div>
                    <div class="category-bar">
                        <div class="category-fill" style="width: 22%"></div>
                    </div>
                </div>
                <div class="category-item">
                    <div class="category-header">
                        <span>Relationships</span>
                        <span class="percentage">15%</span>
                    </div>
                    <div class="category-bar">
                        <div class="category-fill" style="width: 15%"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="analytics-card large">
            <h3>‚úçÔ∏è Word Count Trends</h3>
            <div class="word-count-stats">
                <div class="stat-box">
                    <div class="stat-value">324</div>
                    <div class="stat-label">Avg words/entry</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value">750</div>
                    <div class="stat-label">Longest entry</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value">47,088</div>
                    <div class="stat-label">Total words</div>
                </div>
            </div>
            <div class="line-chart">
                <div class="chart-line">
                    <div class="data-point" style="left: 10%; bottom: 40%"></div>
                    <div class="data-point" style="left: 25%; bottom: 55%"></div>
                    <div class="data-point" style="left: 40%; bottom: 45%"></div>
                    <div class="data-point" style="left: 55%; bottom: 70%"></div>
                    <div class="data-point" style="left: 70%; bottom: 65%"></div>
                    <div class="data-point" style="left: 85%; bottom: 80%"></div>
                </div>
            </div>
        </div>

        <div class="analytics-card">
            <h3>üìÖ Writing Patterns</h3>
            <div class="pattern-stats">
                <div class="pattern-item">
                    <span class="pattern-icon">üåÖ</span>
                    <div>
                        <div class="pattern-label">Most Active Time</div>
                        <div class="pattern-value">9:00 PM - 11:00 PM</div>
                    </div>
                </div>
                <div class="pattern-item">
                    <span class="pattern-icon">üìÜ</span>
                    <div>
                        <div class="pattern-label">Most Active Day</div>
                        <div class="pattern-value">Sunday</div>
                    </div>
                </div>
                <div class="pattern-item">
                    <span class="pattern-icon">‚è±Ô∏è</span>
                    <div>
                        <div class="pattern-label">Avg Writing Time</div>
                        <div class="pattern-value">12 minutes</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .analytics-container {
        max-width: 1400px;
        margin: 0 auto;
    }

    .analytics-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
    }

    .analytics-header h1 {
        font-size: 1.875rem;
        color: #1f2937;
    }

    .range-select {
        padding: 0.625rem 1rem;
        border: 1px solid #e5e7eb;
        border-radius: 8px;
        font-size: 0.875rem;
        font-weight: 600;
        background: white;
    }

    .analytics-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 1.5rem;
    }

    .analytics-card {
        background: white;
        border-radius: 12px;
        padding: 1.5rem;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .analytics-card.large {
        grid-column: span 2;
    }

    .analytics-card h3 {
        margin-bottom: 1.5rem;
        color: #1f2937;
        font-size: 1.125rem;
    }

    .chart-container {
        display: flex;
        gap: 2rem;
        align-items: center;
    }

    .pie-chart {
        width: 180px;
        height: 180px;
        border-radius: 50%;
        background: conic-gradient(
            #10b981 0% 60%,
            #6b7280 60% 85%,
            #ef4444 85% 100%
        );
    }

    .chart-legend {
        flex: 1;
    }

    .legend-item {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        margin-bottom: 0.75rem;
        font-size: 0.875rem;
    }

    .legend-color {
        width: 20px;
        height: 20px;
        border-radius: 4px;
    }

    .positive-bg {
        background: #10b981;
    }

    .neutral-bg {
        background: #6b7280;
    }

    .negative-bg {
        background: #ef4444;
    }

    .mood-stats {
        text-align: center;
    }

    .mood-display {
        margin-bottom: 1.5rem;
    }

    .big-emoji {
        font-size: 4rem;
        display: block;
        margin-bottom: 0.5rem;
    }

    .mood-name {
        font-size: 1.5rem;
        font-weight: 700;
        color: #1f2937;
        margin-bottom: 0.25rem;
    }

    .mood-count {
        color: #6b7280;
        font-size: 0.875rem;
    }

    .top-moods {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .mini-mood {
        padding: 0.625rem;
        background: #f9fafb;
        border-radius: 6px;
        font-size: 0.875rem;
    }

    .streak-stats {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .streak-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .streak-label {
        color: #6b7280;
        font-size: 0.875rem;
    }

    .streak-value {
        font-size: 1.5rem;
        font-weight: 700;
        color: #1f2937;
    }

    .streak-value.primary {
        color: #667eea;
    }

    .streak-value.missed {
        color: #ef4444;
    }

    .progress-bar {
        height: 8px;
        background: #e5e7eb;
        border-radius: 4px;
        overflow: hidden;
        margin-top: 0.5rem;
    }

    .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
        transition: width 0.3s;
    }

    .progress-label {
        text-align: center;
        font-size: 0.75rem;
        color: #6b7280;
        margin-top: 0.5rem;
    }

    .tag-chart {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .tag-bar-item {
        display: flex;
        align-items: center;
        gap: 1rem;
    }

    .tag-name {
        min-width: 100px;
        font-weight: 600;
        color: #374151;
    }

    .tag-bar {
        flex: 1;
        height: 32px;
        background: #f3f4f6;
        border-radius: 6px;
        overflow: hidden;
    }

    .bar-fill {
        height: 100%;
        background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
        display: flex;
        align-items: center;
        justify-content: flex-end;
        padding-right: 0.75rem;
        color: white;
        font-weight: 600;
        font-size: 0.875rem;
        transition: width 0.3s;
    }

    .category-breakdown {
        display: flex;
        flex-direction: column;
        gap: 1.25rem;
    }

    .category-item {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .category-header {
        display: flex;
        justify-content: space-between;
        font-size: 0.875rem;
        font-weight: 600;
        color: #374151;
    }

    .percentage {
        color: #667eea;
    }

    .category-bar {
        height: 8px;
        background: #f3f4f6;
        border-radius: 4px;
        overflow: hidden;
    }

    .category-fill {
        height: 100%;
        background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
        transition: width 0.3s;
    }

    .word-count-stats {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 1rem;
        margin-bottom: 1.5rem;
    }

    .stat-box {
        text-align: center;
        padding: 1rem;
        background: #f9fafb;
        border-radius: 8px;
    }

    .stat-value {
        font-size: 2rem;
        font-weight: 700;
        color: #667eea;
        margin-bottom: 0.25rem;
    }

    .stat-label {
        font-size: 0.75rem;
        color: #6b7280;
    }

    .line-chart {
        height: 150px;
        background: #f9fafb;
        border-radius: 8px;
        position: relative;
    }

    .chart-line {
        position: absolute;
        inset: 0;
    }

    .data-point {
        position: absolute;
        width: 12px;
        height: 12px;
        background: #667eea;
        border-radius: 50%;
        border: 3px solid white;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .pattern-stats {
        display: flex;
        flex-direction: column;
        gap: 1.25rem;
    }

    .pattern-item {
        display: flex;
        align-items: center;
        gap: 1rem;
    }

    .pattern-icon {
        font-size: 2rem;
    }

    .pattern-label {
        font-size: 0.75rem;
        color: #6b7280;
        margin-bottom: 0.25rem;
    }

    .pattern-value {
        font-weight: 600;
        color: #1f2937;
    }
</style>